{"version":3,"sources":["lib/firebase.js","components/Layout.js","pages/Login/index.jsx","lib/api.js","store/user.js","store/board.js","pages/Home/index.js","pages/Board/Card.js","components/Members.js","pages/Board/index.js","App.js","store/index.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","uiConfig","signInSuccessUrl","signInOptions","auth","GoogleAuthProvider","PROVIDER_ID","tosUrl","ui","firebaseui","AuthUI","getAuthorizedEmail","a","Promise","resolve","token","currentUser","email","onAuthStateChanged","currentToken","getIdToken","logout","signOut","finally","window","location","reload","Container","styled","div","Content","Layout","children","Login","useEffect","elementId","start","id","api","axios","create","baseURL","hostname","interceptors","request","use","headers","Authorization","fetchBoards","get","then","data","updateBoard","board","post","_id","createBoard","name","SET_USER","setUserAction","createAction","selectUser","state","user","createReducer","payload","SET_BOARD","SET_BOARD_LOADING","setAction","setBoardAction","columns","map","column","cards","card","members","selectBoard","loading","Home","dispatch","useDispatch","history","useHistory","useSelector","useState","boards","setBoards","setLoading","b","onCreateBoard","boardName","prompt","style","display","flexDirection","justifyContent","alignItems","onClick","color","paddingLeft","paddingRight","paddingBottom","textDecoration","cursor","push","Card","dragging","onCardRemove","onJoin","console","log","className","title","description","fontSize","paddingTop","length","member","includes","alignSelf","border","borderRadius","padding","Members","onChange","marginBottom","width","filter","m","marginLeft","Board","boardId","useParams","bs","bo","find","onNew","o","Math","random","marginRight","renderCard","c","removeCard","n","mm","initialBoard","onCardDragEnd","onColumnDragEnd","allowRemoveColumn","onColumnRemove","allowRenameColumn","onColumnRename","allowRemoveCard","allowAddCard","on","onNewCardConfirm","onCardNew","allowAddColumn","onNewColumnConfirm","onColumnNew","JSON","stringify","to","App","setEmail","e","path","component","render","reducer","Redux","form","ReactDOM","store","document","getElementById"],"mappings":"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","file":"static/js/main.af80542c.chunk.js","sourcesContent":["import firebase from 'firebase';\nimport * as firebaseui from 'firebaseui'\n\nconst config = {\n  apiKey: 'AIzaSyAF0D2aSgIguxzVzzxbHfvFJBTsVoCIhFA',\n  authDomain: 'auth-f570a.firebaseapp.com',\n  databaseURL: 'https://auth-f570a.firebaseio.com',\n  projectId: 'auth-f570a',\n  storageBucket: 'auth-f570a.appspot.com',\n  messagingSenderId: '310591516617',\n  appId: '1:310591516617:web:8f9a557197cb61db',\n};\n\n// This must run before any other firebase functions\nfirebase.initializeApp(config)\n\n// This is our firebaseui configuration object\nconst uiConfig = ({\n  signInSuccessUrl: '/trello',\n  signInOptions: [\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n  ],\n  tosUrl: '/terms-of-service', // This doesn't exist yet\n})\n\n\n// This sets up firebaseui\nconst ui = new firebaseui.auth.AuthUI(firebase.auth())\n\n// This adds firebaseui to the page\n// It does everything else on its own\nexport const startFirebaseUI = function (elementId) {\n  ui.start(elementId, uiConfig)\n}\n\nexport const getAuthorizedEmail = async () => (new Promise((resolve) => {\n  const token = firebase.auth().currentUser?.email;\n\n  if (token) {\n    resolve(token);\n  }\n\n  firebase.auth().onAuthStateChanged(async () => {\n    resolve(firebase.auth().currentUser?.email);\n  });\n}));\n\nconst currentToken = async () => firebase.auth().currentUser?.getIdToken(true);\n\nexport const getIdToken = async () => (\n  new Promise(async (resolve) => {\n    const token = await currentToken();\n\n    if (token) {\n      resolve(token);\n    }\n\n    firebase.auth().onAuthStateChanged(async () => {\n      resolve(await currentToken());\n    });\n  }));\n\n\nexport const logout = async () => firebase.auth()\n  .signOut()\n  .finally(() => window.location.reload());\n","import styled from 'styled-components';\nimport React from 'react';\n\nconst Container = styled.div`\n  background-color: #61dafb;\n  padding-top: calc((100vh - 600px) / 2 - 60px);\n  width: 100%;\n  height: 100vh;\n`;\n\nconst Content = styled.div`\n  width: 900px;\n  height: 600px;\n  margin: auto;\n  padding: 30px;\n  background-color: white;\n`;\n\nexport const Layout = ({children}) => (\n  <Container>\n    <Content>\n      {children}\n    </Content>\n  </Container>\n)\n","import React, {useEffect} from 'react';\nimport {startFirebaseUI} from '../../lib/firebase';\nimport {Layout} from '../../components/Layout';\n\nconst Login = () => {\n  useEffect(() => {\n    startFirebaseUI('#fui');\n  }, [])\n\n  return (\n    <Layout>\n      <div id=\"fui\" />\n    </Layout>\n  );\n};\n\nexport default Login;\n","import axios from 'axios';\nimport {getIdToken} from './firebase';\n\nconst api = axios.create({\n  baseURL: window.location.hostname !== 'localhost' ? 'https://kma-trello.herokuapp.com' : 'http://localhost:3001',\n});\n\napi.interceptors.request.use(async (request) => {\n  request.headers.Authorization = await getIdToken();\n  return request;\n});\n\nconst fetchBoards = async () => {\n  return api.get('/boards')\n    .then(({data}) => data);\n}\n\nconst updateBoard = async (board) => {\n  await api.post(`/boards/${board._id}`, board);\n}\n\nconst createBoard = async (name) => {\n  return api.post('/boards', {name})\n};\n\nexport default {\n  createBoard,\n  fetchBoards,\n  updateBoard,\n}\n","import {createAction, createReducer} from '@reduxjs/toolkit';\n\nconst SET_USER = 'set user action';\n\nexport const setUserAction = createAction(SET_USER);\n\nexport const selectUser = (state) => state.user;\n\nexport default createReducer(null, {\n  [SET_USER]: (state, {payload}) => payload,\n});\n","import {createAction, createReducer} from '@reduxjs/toolkit';\n\nconst SET_BOARD = 'set cards action';\nconst SET_BOARD_LOADING = 'set cards loading action';\n\nconst setAction = createAction(SET_BOARD);\nexport const setBoardAction = (board) => {\n  const columns = board.columns.map(column => ({\n    ...column, cards: column.cards.map(card => ({\n      members: [], ...card,\n    })),\n  }));\n\n  return setAction({...board, columns})\n}\n\nexport const setBoardLoadingAction = createAction(SET_BOARD_LOADING)\n\nexport const selectBoard = (state) => state.board.data;\nexport const selectBoardLoading = (state) => state.board.loading;\n\nconst INITIAL_STATE = {\n  data: null,\n  loading: false,\n};\n\nexport default createReducer(INITIAL_STATE, {\n  [SET_BOARD]: (state, {payload}) => ({...state, data: payload}),\n  [SET_BOARD_LOADING]: (state, {payload}) => ({...state, loading: payload}),\n})\n","import React, {useEffect, useState} from 'react';\nimport '@lourenci/react-kanban/dist/styles.css'\nimport {useHistory} from 'react-router-dom';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {logout} from '../../lib/firebase';\nimport api from '../../lib/api';\nimport {selectUser} from '../../store/user';\nimport {setBoardAction} from '../../store/board';\nimport {Layout} from '../../components/Layout';\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const email = useSelector(selectUser);\n  const [boards, setBoards] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const b = await api.fetchBoards();\n      setBoards(b);\n      setLoading(false);\n    })()\n  }, [history]);\n\n  if (loading) {\n    return (\n      <Layout>\n        <div>LOADING...</div>\n      </Layout>\n    )\n  }\n\n  const renderBoards = () => boards.map(board => (\n    <h3 style={{color: 'blue', textDecoration: 'underline', cursor: 'pointer'}} onClick={() => {\n      dispatch(setBoardAction(board));\n      history.push(`/board/${board._id}`)\n    }}>\n      {board.name}\n    </h3>\n  ))\n\n  const onCreateBoard = async () => {\n    const boardName = prompt('enter board name', '');\n    await api.createBoard(boardName);\n    setLoading(true);\n    const b = await api.fetchBoards();\n    setBoards(b);\n    setLoading(false);\n  }\n\n  return (\n    <Layout>\n      <div style={{display: 'flex', flexDirection: 'row', justifyContent: 'space-between', alignItems: 'center'}}>\n        <h1>TRELLO</h1>\n        <button onClick={logout} style={{color: 'red', paddingLeft: 10, paddingRight: 10}}>Log out</button>\n      </div>\n      <h3 style={{paddingBottom: 30}}>{email}</h3>\n      <div style={{display: 'flex', flexDirection: 'row', alignItems: 'center'}}>\n\n        <h3 style={{paddingRight: 20}}>Your boards:</h3>\n        <button onClick={onCreateBoard} style={{color: 'green', paddingLeft: 10, paddingRight: 10}}>CREATE BOARD+</button>\n      </div>\n      {renderBoards()}\n    </Layout>\n  );\n};\n\nexport default Home;\n","import React from 'react';\nimport {selectUser} from '../../store/user';\nimport {useSelector} from 'react-redux';\n\nconst Card = ({dragging, onCardRemove, onJoin, children: card}) => {\n  const email = useSelector(selectUser);\n\n  const renderJoin = () => {\n    if(card.members && card.members.includes(email)) {\n      return <div onClick={onJoin} style={{\n        alignSelf: 'flex-end',\n        border: '1px solid red',\n        borderRadius: 10,\n        padding: 4,\n        fontSize: 10,\n      }}>LEAVE-</div>;\n    }\n\n    return (\n      <div onClick={onJoin} style={{\n        alignSelf: 'flex-end',\n        border: '1px solid green',\n        borderRadius: 10,\n        padding: 4,\n        fontSize: 10,\n      }}>JOIN+</div>\n    );\n  }\n\n  console.log('card.members', card.members);\n  return (\n    <div className={`react-kanban-card ${dragging ? 'react-kanban-card--dragging' : ''}`}>\n      <span>\n        <div className='react-kanban-card__title'>\n          <span>{card.title}</span>\n            <span style={{ cursor: 'pointer' }} onClick={() => onCardRemove(card)}>\n              ×\n            </span>\n        </div>\n      </span>\n      <div className='react-kanban-card__description'>{card.description}</div>\n      <div style={{fontSize: 10, paddingTop: 20}}><b>members</b></div>\n      {(!card.members || !card.members.length) && <div>-</div>}\n      {card.members && card.members.map && card.members.map(member => (\n        <div key={member} style={{fontSize: 10}}>{member}</div>\n      ))}\n      {renderJoin()}\n    </div>\n  );\n};\n\nexport default Card;\n","import React from 'react';\n\nconst Members = ({members, onChange}) => {\n  return (\n    <div style={{\n      display: 'flex',\n      flexDirection: 'column',\n      border: '1px solid black',\n      marginBottom: 10,\n      padding: 4,\n      width: 500,\n    }}>\n      <div><u>Members:</u>\n        </div>\n      {members.map(member => (\n        <div style={{\n          display: 'flex',\n          flexDirection: 'row',\n          alignItems: 'center',\n          paddingRight: 10,\n        }}>\n          <div style={{paddingRight: 4}}>{member}</div>\n          <span style={{cursor: 'pointer'}} onClick={() => onChange(members.filter(m => m !== member))}>\n              ×\n          </span>\n        </div>\n      ))}\n      <span style={{cursor: 'pointer', marginLeft: 0}} onClick={() => {\n        const m = prompt('enter member name', '');\n        if(m) {\n          onChange([...members, m]);\n        }\n      }}>\n        +\n      </span>\n    </div>\n  )\n};\n\nexport default Members;\n","import React, {useEffect, useState} from 'react';\nimport DefaultBoard from '@lourenci/react-kanban'\nimport '@lourenci/react-kanban/dist/styles.css'\nimport {useDispatch, useSelector} from 'react-redux';\nimport  {Redirect, useHistory, useParams} from 'react-router-dom';\nimport {selectUser} from '../../store/user';\nimport {selectBoard, setBoardAction} from '../../store/board';\nimport api from '../../lib/api';\nimport {Layout} from '../../components/Layout';\nimport Card from './Card';\nimport Members from '../../components/Members';\n\nconst Board = () => {\n  const {id: boardId} = useParams();\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const email = useSelector(selectUser);\n  const board = useSelector(selectBoard);\n  const [loading, setLoading] = useState(true);\n\n  console.log('board 1', board);\n\n  useEffect(() => {\n    (async () => {\n      const bs = await api.fetchBoards();\n      const bo = bs.find(b => b._id === boardId);\n      dispatch(setBoardAction(bo));\n      setLoading(false);\n    })()\n  }, [dispatch]);\n\n\n  const onChange = async (b) => {\nconsole.log('change', b);\n    try {\n      console.log('new b', b);\n      await api.updateBoard(b)\n      dispatch(setBoardAction(b));\n    } catch (e) {\n      console.log('e', e);\n    }\n  };\n\n  const onNew = (o) => ({id: Math.random() * 10000, ...o});\n\n  const onJoin = (c) => () => {\n    console.log('j');\n\n    const toggleMembers = (m) => {\n      if(m.includes(email)) {\n        return m.filter(mm => mm !== email);\n      }\n\n      return [...m, email];\n    }\n    return onChange({\n      ...board, columns: board.columns.map(column => ({\n        ...column, cards: column.cards.map(card => ({\n          ...card, members: c.id === card.id ? toggleMembers(card.members) : card.members\n        })),\n      })),\n    });\n  };\n\n  if (loading) {\n    return (\n      <Layout>\n        <div>LOADING...</div>\n      </Layout>\n    )\n  }\n\n  if(!board.members.includes(email)) {\n    return <Redirect to=\"/home\" />\n  }\n\n  return (\n    <Layout>\n      <div style={{display: 'flex', flexDirection: 'row', paddingBottom: 20}}>\n      <button onClick={() => history.push('/home')} style={{color: 'blue', marginRight: 10, padding: 10}}>Home</button>\n        <h1>BOARD: {board.name}</h1>\n      </div>\n      <Members members={board.members} onChange={m => onChange({...board, members: m})}/>\n      <DefaultBoard\n        key={JSON.stringify(board)}\n        renderCard={(card, {dragging, removeCard, ...n}) => {\n          console.log('n', n);\n          return (\n            <Card\n              onJoin={onJoin(card)}\n              onCardRemove={removeCard}\n              dragging={dragging}\n            >{card}</Card>\n          );\n        }}\n        initialBoard={board}\n        onCardDragEnd={onChange}\n        onColumnDragEnd={onChange}\n        allowRemoveColumn onColumnRemove={onChange}\n        allowRenameColumn onColumnRename={onChange}\n        allowRemoveCard onCardRemove={onChange}\n        allowAddCard={{on: 'top'}} onNewCardConfirm={onNew} onCardNew={onChange}\n        allowAddColumn onNewColumnConfirm={onNew} onColumnNew={onChange}\n      />\n    </Layout>\n  );\n};\n\nexport default Board;\n","import './App.css';\nimport React, {useEffect, useState} from 'react';\nimport {HashRouter, Route, Switch, Redirect} from 'react-router-dom';\nimport Login from './pages/Login';\nimport Home from './pages/Home';\nimport {getAuthorizedEmail} from './lib/firebase';\nimport {setUserAction} from './store/user';\nimport {useDispatch} from 'react-redux';\nimport Board from './pages/Board';\nimport {Layout} from './components/Layout';\n\nfunction App() {\n  const dispatch = useDispatch();\n  const [email, setEmail] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const e = await getAuthorizedEmail()\n      setEmail(e);\n      setLoading(false);\n\n      dispatch(setUserAction(e));\n    })()\n  }, []);\n\n  if(loading) {\n    return (\n      <Layout>\n        <div>LOADING...</div>\n      </Layout>\n    )\n  }\n\n  const renderSwitch = () => {\n    if(email) {\n      return (\n        <Switch>\n          <Route path=\"/home\" component={Home}/>\n          <Route path=\"/board/:id\" component={Board}/>\n          <Route path=\"*\" render={() => <Redirect to=\"/home\" />}/>\n        </Switch>\n      )\n    }\n\n    return (\n      <Switch>\n        <Route path=\"/login\" component={Login}/>\n        <Route path=\"*\" render={() => <Redirect to=\"/login\" />}/>\n      </Switch>\n    )\n  };\n\n\n  return (\n    <HashRouter>\n      {renderSwitch()}\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import * as Redux from '@reduxjs/toolkit';\nimport {reducer as form} from 'redux-form';\nimport user from './user';\nimport board from './board';\n\nconst reducer = Redux.combineReducers({\n  board,\n  user,\n  form,\n});\n\nexport default Redux.createStore(reducer);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {Provider} from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App/>\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}