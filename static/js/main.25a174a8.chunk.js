(this.webpackJsonptrello=this.webpackJsonptrello||[]).push([[0],{101:function(e,t,n){},204:function(e,t,n){"use strict";n.r(t);var r=n(4),a=n(2),c=n(37),o=n.n(c),i=(n(99),n(6)),s=n.n(i),u=n(12),d=n(28),l=(n(101),n(11)),b=n(46),j=n(22),p=n(83);j.a.initializeApp({apiKey:"AIzaSyAF0D2aSgIguxzVzzxbHfvFJBTsVoCIhFA",authDomain:"auth-f570a.firebaseapp.com",databaseURL:"https://auth-f570a.firebaseio.com",projectId:"auth-f570a",storageBucket:"auth-f570a.appspot.com",messagingSenderId:"310591516617",appId:"1:310591516617:web:8f9a557197cb61db"});var f={signInSuccessUrl:"/",signInOptions:[j.a.auth.GoogleAuthProvider.PROVIDER_ID],tosUrl:"/terms-of-service"},h=new p.a.AuthUI(j.a.auth()),O=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){var t,n=null===(t=j.a.auth().currentUser)||void 0===t?void 0:t.email;n&&e(n),j.a.auth().onAuthStateChanged(Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e(null===(n=j.a.auth().currentUser)||void 0===n?void 0:n.email);case 1:case"end":return t.stop()}}),t)}))))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",null===(t=j.a.auth().currentUser)||void 0===t?void 0:t.getIdToken(!0));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),x=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise(function(){var e=Object(u.a)(s.a.mark((function e(t){var n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m();case 2:(n=e.sent)&&t(n),j.a.auth().onAuthStateChanged(Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=t,e.next=3,m();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),v=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",j.a.auth().signOut().finally((function(){return window.location.reload()})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),g=n(55),w=n(56);function y(){var e=Object(g.a)(["\n  width: 900px;\n  height: 600px;\n  margin: auto;\n  padding: 30px;\n  background-color: white;\n"]);return y=function(){return e},e}function k(){var e=Object(g.a)(["\n  background-color: #61dafb;\n  padding-top: calc((100vh - 600px) / 2 - 60px);\n  width: 100%;\n  height: 100vh;\n"]);return k=function(){return e},e}var C=w.a.div(k()),R=w.a.div(y()),I=function(e){var t=e.children;return Object(r.jsx)(C,{children:Object(r.jsx)(R,{children:t})})},A=function(){return Object(a.useEffect)((function(){var e;e="#fui",h.start(e,f)}),[]),Object(r.jsx)(I,{children:Object(r.jsx)("div",{id:"fui"})})},S=(n(64),n(17)),B=n(89),D=n.n(B).a.create({baseURL:"localhost"!==window.location.hostname?"https://kma-trello.herokuapp.com":"http://localhost:3001"});D.interceptors.request.use(function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return t.headers.Authorization=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());var E,N=function(){var e=Object(u.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.get("/boards").then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,D.post("/boards/".concat(t._id),t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z={createBoard:function(){var e=Object(u.a)(s.a.mark((function e(t){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",D.post("/boards",{name:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fetchBoards:N,updateBoard:L},U=n(31),_=n(27),J="set user action",T=Object(_.a)(J),G=function(e){return e.user},P=Object(_.b)(null,Object(U.a)({},J,(function(e,t){return t.payload}))),V=n(13),F="set cards action",H="set cards loading action",q=Object(_.a)(F),K=function(e){var t=e.columns.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{cards:e.cards.map((function(e){return Object(V.a)({members:[]},e)}))})}));return q(Object(V.a)(Object(V.a)({},e),{},{columns:t}))},M=(Object(_.a)(H),function(e){return e.board.data}),Y=Object(_.b)({data:null,loading:!1},(E={},Object(U.a)(E,F,(function(e,t){var n=t.payload;return Object(V.a)(Object(V.a)({},e),{},{data:n})})),Object(U.a)(E,H,(function(e,t){var n=t.payload;return Object(V.a)(Object(V.a)({},e),{},{loading:n})})),E)),Q=function(){var e=Object(S.b)(),t=Object(l.g)(),n=Object(S.c)(G),c=Object(a.useState)([]),o=Object(d.a)(c,2),i=o[0],b=o[1],j=Object(a.useState)(!0),p=Object(d.a)(j,2),f=p[0],h=p[1];if(Object(a.useEffect)((function(){Object(u.a)(s.a.mark((function e(){var t;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,z.fetchBoards();case 2:t=e.sent,b(t),h(!1);case 5:case"end":return e.stop()}}),e)})))()}),[t]),f)return Object(r.jsx)(I,{children:Object(r.jsx)("div",{children:"LOADING..."})});var O=function(){var e=Object(u.a)(s.a.mark((function e(){var t,n;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=prompt("enter board name",""),e.next=3,z.createBoard(t);case 3:return h(!0),e.next=6,z.fetchBoards();case 6:n=e.sent,b(n),h(!1);case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(I,{children:[Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"space-between",alignItems:"center"},children:[Object(r.jsx)("h1",{children:"TRELLO"}),Object(r.jsx)("button",{onClick:v,style:{color:"red",paddingLeft:10,paddingRight:10},children:"Log out"})]}),Object(r.jsx)("h3",{style:{paddingBottom:30},children:n}),Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center"},children:[Object(r.jsx)("h3",{style:{paddingRight:20},children:"Your boards:"}),Object(r.jsx)("button",{onClick:O,style:{color:"green",paddingLeft:10,paddingRight:10},children:"CREATE BOARD+"})]}),i.map((function(n){return Object(r.jsx)("h3",{style:{color:"blue",textDecoration:"underline",cursor:"pointer"},onClick:function(){e(K(n)),t.push("/board/".concat(n._id))},children:n.name})}))]})},W=n(93),X=n(49),Z=n(90),$=n.n(Z),ee=function(e){var t=e.dragging,n=e.onCardRemove,a=e.onJoin,c=e.children,o=Object(S.c)(G);return console.log("card.members",c.members),Object(r.jsxs)("div",{className:"react-kanban-card ".concat(t?"react-kanban-card--dragging":""),children:[Object(r.jsx)("span",{children:Object(r.jsxs)("div",{className:"react-kanban-card__title",children:[Object(r.jsx)("span",{children:c.title}),Object(r.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return n(c)},children:"\xd7"})]})}),Object(r.jsx)("div",{className:"react-kanban-card__description",children:c.description}),Object(r.jsx)("div",{style:{fontSize:10,paddingTop:20},children:Object(r.jsx)("b",{children:"members"})}),(!c.members||!c.members.length)&&Object(r.jsx)("div",{children:"-"}),c.members&&c.members.map&&c.members.map((function(e){return Object(r.jsx)("div",{style:{fontSize:10},children:e},e)})),c.members&&c.members.includes(o)?Object(r.jsx)("div",{onClick:a,style:{alignSelf:"flex-end",border:"1px solid red",borderRadius:10,padding:4,fontSize:10},children:"LEAVE-"}):Object(r.jsx)("div",{onClick:a,style:{alignSelf:"flex-end",border:"1px solid green",borderRadius:10,padding:4,fontSize:10},children:"JOIN+"})]})},te=function(e){var t=e.members,n=e.onChange;return Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"column",border:"1px solid black",marginBottom:10,padding:4,width:500},children:[t.map((function(e){return Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row",alignItems:"center",paddingRight:10},children:[Object(r.jsx)("div",{style:{paddingRight:4},children:e}),Object(r.jsx)("span",{style:{cursor:"pointer"},onClick:function(){return n(t.filter((function(t){return t!==e})))},children:"\xd7"})]})})),Object(r.jsx)("span",{style:{cursor:"pointer"},onClick:function(){var e=prompt("enter member name","");e&&n([].concat(Object(X.a)(t),[e]))},children:"+"})]})},ne=function(){var e=Object(l.h)().id,t=Object(S.b)(),n=Object(l.g)(),c=Object(S.c)(G),o=Object(S.c)(M),i=Object(a.useState)(!0),b=Object(d.a)(i,2),j=b[0],p=b[1];console.log("board 1",o),Object(a.useEffect)((function(){Object(u.a)(s.a.mark((function n(){var r,a;return s.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,z.fetchBoards();case 2:r=n.sent,a=r.find((function(t){return t._id===e})),t(K(a)),p(!1);case 6:case"end":return n.stop()}}),n)})))()}),[t]);var f=function(){var e=Object(u.a)(s.a.mark((function e(n){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("change",n),e.prev=1,console.log("new b",n),e.next=5,z.updateBoard(n);case 5:t(K(n)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.log("e",e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),h=function(e){return Object(V.a)({id:1e4*Math.random()},e)};return j?Object(r.jsx)(I,{children:Object(r.jsx)("div",{children:"LOADING..."})}):o.members.includes(c)?Object(r.jsxs)(I,{children:[Object(r.jsxs)("div",{style:{display:"flex",flexDirection:"row",paddingBottom:20},children:[Object(r.jsx)("button",{onClick:function(){return n.push("/home")},style:{color:"blue",marginRight:10,padding:10},children:"Home"}),Object(r.jsxs)("h1",{children:["BOARD: ",o.name]})]}),Object(r.jsx)(te,{members:o.members,onChange:function(e){return f(Object(V.a)(Object(V.a)({},o),{},{members:e}))}}),Object(r.jsx)($.a,{renderCard:function(e,t){var n,a=t.dragging,i=t.removeCard,s=Object(W.a)(t,["dragging","removeCard"]);return console.log("n",s),Object(r.jsx)(ee,{onJoin:(n=e,function(){return console.log("j"),f(Object(V.a)(Object(V.a)({},o),{},{columns:o.columns.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{cards:e.cards.map((function(e){return Object(V.a)(Object(V.a)({},e),{},{members:n.id===e.id?(t=e.members,t.includes(c)?t.filter((function(e){return e!==c})):[].concat(Object(X.a)(t),[c])):e.members});var t}))})}))}))}),onCardRemove:i,dragging:a,children:e})},initialBoard:o,onCardDragEnd:f,onColumnDragEnd:f,allowRemoveColumn:!0,onColumnRemove:f,allowRenameColumn:!0,onColumnRename:f,allowRemoveCard:!0,onCardRemove:f,allowAddCard:{on:"top"},onNewCardConfirm:h,onCardNew:f,allowAddColumn:!0,onNewColumnConfirm:h,onColumnNew:f},JSON.stringify(o))]}):Object(r.jsx)(l.a,{to:"/home"})};var re=function(){var e=Object(S.b)(),t=Object(a.useState)(null),n=Object(d.a)(t,2),c=n[0],o=n[1],i=Object(a.useState)(!0),j=Object(d.a)(i,2),p=j[0],f=j[1];return Object(a.useEffect)((function(){Object(u.a)(s.a.mark((function t(){var n;return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,O();case 2:n=t.sent,o(n),f(!1),e(T(n));case 6:case"end":return t.stop()}}),t)})))()}),[]),p?Object(r.jsx)(I,{children:Object(r.jsx)("div",{children:"LOADING..."})}):Object(r.jsx)(b.a,{children:c?Object(r.jsxs)(l.d,{children:[Object(r.jsx)(l.b,{path:"/home",component:Q}),Object(r.jsx)(l.b,{path:"/board/:id",component:ne}),Object(r.jsx)(l.b,{path:"*",render:function(){return Object(r.jsx)(l.a,{to:"/home"})}})]}):Object(r.jsxs)(l.d,{children:[Object(r.jsx)(l.b,{path:"/login",component:A}),Object(r.jsx)(l.b,{path:"*",render:function(){return Object(r.jsx)(l.a,{to:"/login"})}})]})})},ae=n(21),ce=n(206),oe=ae.c({board:Y,user:P,form:ce.a}),ie=ae.e(oe);o.a.render(Object(r.jsx)(S.a,{store:ie,children:Object(r.jsx)(re,{})}),document.getElementById("root"))},99:function(e,t,n){}},[[204,1,2]]]);
//# sourceMappingURL=main.25a174a8.chunk.js.map