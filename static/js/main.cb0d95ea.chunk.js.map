{"version":3,"sources":["lib/firebase.js","components/Layout.js","pages/Login/index.jsx","lib/api.js","store/user.js","store/board.js","pages/Home/index.js","pages/Board/index.js","App.js","store/index.js","index.js"],"names":["firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","uiConfig","signInSuccessUrl","signInOptions","auth","GoogleAuthProvider","PROVIDER_ID","tosUrl","ui","firebaseui","AuthUI","getAuthorizedEmail","a","Promise","resolve","token","currentUser","email","onAuthStateChanged","currentToken","getIdToken","logout","signOut","finally","window","location","reload","Container","styled","div","Content","Layout","children","Login","useEffect","elementId","start","id","api","axios","create","baseURL","hostname","interceptors","request","use","headers","Authorization","fetchBoards","get","then","data","updateBoard","board","post","_id","SET_USER","setUserAction","createAction","selectUser","state","user","createReducer","payload","SET_BOARD","SET_BOARD_LOADING","setBoardAction","selectBoard","loading","Home","dispatch","useDispatch","history","useHistory","useSelector","useState","boards","setBoards","setLoading","b","map","style","color","textDecoration","cursor","onClick","push","name","Board","console","log","onChange","initialBoard","onCardDragEnd","onColumnDragEnd","allowRenameColumn","onColumnRename","allowAddColumn","allowRemoveCard","onCardRemove","allowAddCard","on","to","App","setEmail","e","path","component","render","reducer","Redux","form","ReactDOM","store","document","getElementById"],"mappings":"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","file":"static/js/main.cb0d95ea.chunk.js","sourcesContent":["import firebase from 'firebase';\nimport * as firebaseui from 'firebaseui'\n\nconst config = {\n  apiKey: 'AIzaSyAF0D2aSgIguxzVzzxbHfvFJBTsVoCIhFA',\n  authDomain: 'auth-f570a.firebaseapp.com',\n  databaseURL: 'https://auth-f570a.firebaseio.com',\n  projectId: 'auth-f570a',\n  storageBucket: 'auth-f570a.appspot.com',\n  messagingSenderId: '310591516617',\n  appId: '1:310591516617:web:8f9a557197cb61db',\n};\n\n// This must run before any other firebase functions\nfirebase.initializeApp(config)\n\n// This is our firebaseui configuration object\nconst uiConfig = ({\n  signInSuccessUrl: '/',\n  signInOptions: [\n    firebase.auth.GoogleAuthProvider.PROVIDER_ID,\n  ],\n  tosUrl: '/terms-of-service', // This doesn't exist yet\n})\n\n\n// This sets up firebaseui\nconst ui = new firebaseui.auth.AuthUI(firebase.auth())\n\n// This adds firebaseui to the page\n// It does everything else on its own\nexport const startFirebaseUI = function (elementId) {\n  ui.start(elementId, uiConfig)\n}\n\nexport const getAuthorizedEmail = async () => (new Promise((resolve) => {\n  const token = firebase.auth().currentUser?.email;\n\n  if (token) {\n    resolve(token);\n  }\n\n  firebase.auth().onAuthStateChanged(async () => {\n    resolve(firebase.auth().currentUser?.email);\n  });\n}));\n\nconst currentToken = async () => firebase.auth().currentUser?.getIdToken(true);\n\nexport const getIdToken = async () => (\n  new Promise(async (resolve) => {\n    const token = await currentToken();\n\n    if (token) {\n      resolve(token);\n    }\n\n    firebase.auth().onAuthStateChanged(async () => {\n      resolve(await currentToken());\n    });\n  }));\n\n\nexport const logout = async () => firebase.auth()\n  .signOut()\n  .finally(() => window.location.reload());\n","import styled from 'styled-components';\nimport React from 'react';\n\nconst Container = styled.div`\n  background-color: #61dafb;\n  padding-top: calc((100vh - 600px) / 2 - 60px);\n  width: 100%;\n  height: 100vh;\n`;\n\nconst Content = styled.div`\n  width: 900px;\n  height: 600px;\n  margin: auto;\n  padding: 30px;\n  background-color: white;\n`;\n\nexport const Layout = ({children}) => (\n  <Container>\n    <Content>\n      {children}\n    </Content>\n  </Container>\n)\n","import React, {useEffect} from 'react';\nimport {startFirebaseUI} from '../../lib/firebase';\nimport {Layout} from '../../components/Layout';\n\nconst Login = () => {\n  useEffect(() => {\n    startFirebaseUI('#fui');\n  }, [])\n\n  return (\n    <Layout>\n      <div id=\"fui\" />\n    </Layout>\n  );\n};\n\nexport default Login;\n","import axios from 'axios';\nimport {getIdToken} from './firebase';\n\nconst api = axios.create({\n  baseURL: window.location.hostname !== 'localhost' ? 'https://kma-trello.herokuapp.com' : 'http://localhost:3001',\n});\n\napi.interceptors.request.use(async (request) => {\n  request.headers.Authorization = await getIdToken();\n  return request;\n});\n\nconst fetchBoards = async () => {\n  return api.get('/boards')\n    .then(({data}) => data);\n}\n\nconst updateBoard = async (board) => {\n  await api.post(`/boards/${board._id}`, board);\n}\n\nexport default {\n  fetchBoards,\n  updateBoard,\n}\n","import {createAction, createReducer} from '@reduxjs/toolkit';\n\nconst SET_USER = 'set user action';\n\nexport const setUserAction = createAction(SET_USER);\n\nexport const selectUser = (state) => state.user;\n\nexport default createReducer(null, {\n  [SET_USER]: (state, {payload}) => payload,\n});\n","import {createAction, createReducer} from '@reduxjs/toolkit';\n\nconst SET_BOARD = 'set cards action';\nconst SET_BOARD_LOADING = 'set cards loading action';\n\nexport const setBoardAction = createAction(SET_BOARD);\nexport const setBoardLoadingAction = createAction(SET_BOARD_LOADING)\n\nexport const selectBoard = (state) => state.board.data;\nexport const selectBoardLoading = (state) => state.board.loading;\n\nconst INITIAL_STATE = {\n  data: null,\n  loading: false,\n};\n\nexport default createReducer(INITIAL_STATE, {\n  [SET_BOARD]: (state, {payload}) => ({...state, data: payload}),\n  [SET_BOARD_LOADING]: (state, {payload}) => ({...state, loading: payload}),\n})\n","import React, {useEffect, useState} from 'react';\nimport '@lourenci/react-kanban/dist/styles.css'\nimport {useHistory} from 'react-router-dom';\nimport {useDispatch, useSelector} from 'react-redux';\nimport {logout} from '../../lib/firebase';\nimport api from '../../lib/api';\nimport {selectUser} from '../../store/user';\nimport {setBoardAction} from '../../store/board';\nimport {Layout} from '../../components/Layout';\n\nconst Home = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const email = useSelector(selectUser);\n  const [boards, setBoards] = useState([]);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const b = await api.fetchBoards();\n      setBoards(b);\n      setLoading(false);\n    })()\n  }, [history]);\n\n  if (loading) {\n    return (\n      <Layout>\n        <div>LOADING...</div>\n      </Layout>\n    )\n  }\n\n  const renderBoards = () => boards.map(board => (\n    <h3 style={{color: 'blue', textDecoration: 'underline', cursor: 'pointer'}} onClick={() => {\n      dispatch(setBoardAction(board));\n      history.push('/board')\n    }}>\n      {board.name}\n    </h3>\n  ))\n\n  return (\n    <Layout>\n      <h1>TRELLO</h1>\n      <h3>{email}</h3>\n      {renderBoards()}\n      <button onClick={logout} style={{color: 'red'}}>Log out</button>\n    </Layout>\n  );\n};\n\nexport default Home;\n","import React from 'react';\n// import Board from 'react-trello'\nimport DefaultBoard from '@lourenci/react-kanban'\nimport '@lourenci/react-kanban/dist/styles.css'\nimport {useDispatch, useSelector} from 'react-redux';\nimport {logout} from '../../lib/firebase';\nimport {Redirect, useHistory} from 'react-router-dom';\nimport {selectUser} from '../../store/user';\nimport {selectBoard, setBoardAction} from '../../store/board';\nimport api from '../../lib/api';\nimport {Layout} from '../../components/Layout';\n\nconst Board = () => {\n  const dispatch = useDispatch();\n  const history = useHistory();\n  const email = useSelector(selectUser);\n  const board = useSelector(selectBoard);\n\n  console.log('board 1', board);\n\n\n  const onChange = async (b) => {\n    await api.updateBoard(b)\n    dispatch(setBoardAction(b));\n  };\n\n  if(!board) {\n    return <Redirect to=\"/home\" />\n  }\n\n  return (\n    <Layout>\n      <h1>BOARD: {board.name}</h1>\n      <DefaultBoard\n        initialBoard={board}\n        onCardDragEnd={onChange}\n        onColumnDragEnd={onChange}\n        allowRenameColumn\n        onColumnRename={onChange}\n        allowAddColumn\n        allowRemoveCard\n        onCardRemove={onChange}\n        allowAddCard={{on: 'top'}}\n      />\n      <button onClick={() => history.push('/home')} style={{color: 'blue'}}>Home</button>\n      <button onClick={logout} style={{color: 'red'}}>Log out</button>\n    </Layout>\n  );\n};\n\nexport default Board;\n","import './App.css';\nimport React, {useEffect, useState} from 'react';\nimport {HashRouter, Route, Switch, Redirect} from 'react-router-dom';\nimport Login from './pages/Login';\nimport Home from './pages/Home';\nimport {getAuthorizedEmail} from './lib/firebase';\nimport {setUserAction} from './store/user';\nimport {useDispatch} from 'react-redux';\nimport Board from './pages/Board';\nimport {Layout} from './components/Layout';\n\nfunction App() {\n  const dispatch = useDispatch();\n  const [email, setEmail] = useState(null);\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    (async () => {\n      const e = await getAuthorizedEmail()\n      setEmail(e);\n      setLoading(false);\n\n      dispatch(setUserAction(e));\n    })()\n  }, []);\n\n  if(loading) {\n    return (\n      <Layout>\n        <div>LOADING...</div>\n      </Layout>\n    )\n  }\n\n  const renderSwitch = () => {\n    if(email) {\n      return (\n        <Switch>\n          <Route path=\"/home\" component={Home}/>\n          <Route path=\"/board\" component={Board}/>\n          <Route path=\"*\" render={() => <Redirect to=\"/home\" />}/>\n        </Switch>\n      )\n    }\n\n    return (\n      <Switch>\n        <Route path=\"/login\" component={Login}/>\n        <Route path=\"*\" render={() => <Redirect to=\"/login\" />}/>\n      </Switch>\n    )\n  };\n\n\n  return (\n    <HashRouter>\n      {renderSwitch()}\n    </HashRouter>\n  );\n}\n\nexport default App;\n","import * as Redux from '@reduxjs/toolkit';\nimport {reducer as form} from 'redux-form';\nimport user from './user';\nimport board from './board';\n\nconst reducer = Redux.combineReducers({\n  board,\n  user,\n  form,\n});\n\nexport default Redux.createStore(reducer);\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {Provider} from 'react-redux';\nimport store from './store';\n\nReactDOM.render(\n  <Provider store={store}>\n    <App/>\n  </Provider>,\n  document.getElementById('root'),\n);\n"],"sourceRoot":""}